(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[342],{2898:function(e,t,r){"use strict";r.d(t,{Z:function(){return c}});var a=r(2265),n={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let s=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),c=(e,t)=>{let r=(0,a.forwardRef)(({color:r="currentColor",size:c=24,strokeWidth:l=2,absoluteStrokeWidth:i,className:d="",children:o,...u},x)=>(0,a.createElement)("svg",{ref:x,...n,width:c,height:c,stroke:r,strokeWidth:i?24*Number(l)/Number(c):l,className:["lucide",`lucide-${s(e)}`,d].join(" "),...u},[...t.map(([e,t])=>(0,a.createElement)(e,t)),...Array.isArray(o)?o:[o]]));return r.displayName=`${e}`,r}},3067:function(e,t,r){"use strict";r.d(t,{Z:function(){return a}});/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,r(2898).Z)("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]])},2919:function(e,t,r){"use strict";r.d(t,{Z:function(){return a}});/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,r(2898).Z)("Calculator",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",key:"1nb95v"}],["line",{x1:"8",x2:"16",y1:"6",y2:"6",key:"x4nwl0"}],["line",{x1:"16",x2:"16",y1:"14",y2:"18",key:"wjye3r"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M8 18h.01",key:"lrp35t"}]])},5817:function(e,t,r){"use strict";r.d(t,{Z:function(){return a}});/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,r(2898).Z)("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]])},4280:function(e,t,r){"use strict";r.d(t,{Z:function(){return a}});/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,r(2898).Z)("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]])},4893:function(e,t,r){"use strict";r.d(t,{Z:function(){return a}});/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,r(2898).Z)("Scale",[["path",{d:"m16 16 3-8 3 8c-.87.65-1.92 1-3 1s-2.13-.35-3-1Z",key:"7g6ntu"}],["path",{d:"m2 16 3-8 3 8c-.87.65-1.92 1-3 1s-2.13-.35-3-1Z",key:"ijws7r"}],["path",{d:"M7 21h10",key:"1b0cd5"}],["path",{d:"M12 3v18",key:"108xh3"}],["path",{d:"M3 7h2c2 0 5-1 7-2 2 1 5 2 7 2h2",key:"3gwbw2"}]])},4522:function(e,t,r){"use strict";r.d(t,{Z:function(){return a}});/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,r(2898).Z)("TrendingDown",[["polyline",{points:"22 17 13.5 8.5 8.5 13.5 2 7",key:"1r2t7k"}],["polyline",{points:"16 17 22 17 22 11",key:"11uiuu"}]])},5790:function(e,t,r){"use strict";r.d(t,{Z:function(){return a}});/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,r(2898).Z)("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]])},5140:function(e,t,r){Promise.resolve().then(r.bind(r,4318))},4318:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return y}});var a=r(7437),n=r(2265),s=r(1396),c=r.n(s),l=r(575),i=r(5671),d=r(3277),o=r(4280),u=r(3067),x=r(5817),h=r(5790),m=r(4522),f=r(4893),p=r(2919);function y(){var e;let[t,r]=(0,n.useState)("current-month"),{trialBalance:s,summary:y,isLoading:g,error:b,downloadTrialBalance:j,refresh:v}=function(e){let[t,r]=(0,n.useState)(null),[a,s]=(0,n.useState)(!1),[c,l]=(0,n.useState)(null),i=async e=>{try{s(!0),l(null);let t=await fetch("/api/financial-statements/trial-balance".concat(e?"?period=".concat(e):""));if(!t.ok)throw Error("HTTP ".concat(t.status,": ").concat(t.statusText));let a=await t.json();a.success?r(a.data):l("Failed to fetch trial balance")}catch(e){l(e instanceof Error?e.message:"An error occurred")}finally{s(!1)}};return(0,n.useEffect)(()=>{i(e)},[e]),{trialBalance:(null==t?void 0:t.trialBalance)||[],summary:null==t?void 0:t.summary,isLoading:a,error:c,fetchTrialBalance:i,downloadTrialBalance:()=>{if(!t)return;let e="Account Code,Account Name,Account Type,Debit Balance,Credit Balance\n";t.trialBalance.forEach(t=>{e+="".concat(t.accountCode,',"').concat(t.accountName,'",').concat(t.accountType,",").concat(t.debitBalance,",").concat(t.creditBalance,"\n")}),e+="\nSummary,,Current Period\n"+",,Total Debits,".concat(t.summary.totalDebits,"\n")+",,Total Credits,".concat(t.summary.totalCredits,"\n")+",,Is Balanced,".concat(t.summary.isBalanced?"YES":"NO","\n")+",,Difference,".concat(t.summary.difference,"\n");let r=new Blob([e],{type:"text/csv"}),a=window.URL.createObjectURL(r),n=document.createElement("a");n.href=a,n.download="trial-balance-".concat(t.summary.asOfDate,".csv"),n.click(),window.URL.revokeObjectURL(a)},refresh:()=>{i(e)}}}(t),N=e=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(e),w=s.reduce((e,t)=>(e[t.accountType]||(e[t.accountType]=[]),e[t.accountType].push(t),e),{}),k=(e,t)=>{var r;return(null===(r=w[e])||void 0===r?void 0:r.reduce((e,r)=>e+r[t],0))||0};return b?(0,a.jsx)("div",{className:"min-h-screen bg-gray-50 py-8",children:(0,a.jsx)("div",{className:"container mx-auto px-4",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("h1",{className:"text-2xl font-bold text-red-600 mb-4",children:"Error"}),(0,a.jsx)("p",{className:"text-gray-600",children:b}),(0,a.jsxs)(l.z,{onClick:v,className:"mt-4",children:[(0,a.jsx)(o.Z,{className:"h-4 w-4 mr-2"}),"Retry"]})]})})}):(0,a.jsx)("div",{className:"min-h-screen bg-gray-50 py-8",children:(0,a.jsxs)("div",{className:"container mx-auto px-4",children:[(0,a.jsx)("div",{className:"mb-8",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"flex items-center gap-4 mb-4",children:[(0,a.jsx)(c(),{href:"/dashboard",children:(0,a.jsxs)(l.z,{variant:"outline",size:"sm",children:[(0,a.jsx)(u.Z,{className:"h-4 w-4 mr-2"}),"Back to Dashboard"]})}),(0,a.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"Trial Balance"})]}),(0,a.jsx)("p",{className:"text-gray-600",children:"Verify that total debits equal total credits for all accounts"})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsxs)("select",{value:t,onChange:e=>r(e.target.value),className:"px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:[(0,a.jsx)("option",{value:"current-month",children:"Current Month"}),(0,a.jsx)("option",{value:"last-month",children:"Last Month"}),(0,a.jsx)("option",{value:"current-quarter",children:"Current Quarter"}),(0,a.jsx)("option",{value:"current-year",children:"Current Year"}),(0,a.jsx)("option",{value:"custom",children:"Custom Range"})]}),(0,a.jsxs)(l.z,{variant:"outline",onClick:v,disabled:g,children:[(0,a.jsx)(o.Z,{className:"h-4 w-4 mr-2 ".concat(g?"animate-spin":"")}),"Refresh"]}),(0,a.jsxs)(l.z,{variant:"outline",onClick:j,disabled:!y,children:[(0,a.jsx)(x.Z,{className:"h-4 w-4 mr-2"}),"Export"]})]})]})}),y&&(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8",children:[(0,a.jsx)(i.Zb,{className:"bg-gradient-to-r from-blue-500 to-blue-600 text-white",children:(0,a.jsx)(i.aY,{className:"p-6",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-blue-100 text-sm",children:"Total Debits"}),(0,a.jsx)("p",{className:"text-2xl font-bold",children:N(y.totalDebits)})]}),(0,a.jsx)("div",{className:"p-3 bg-blue-400 bg-opacity-30 rounded-lg",children:(0,a.jsx)(h.Z,{className:"h-6 w-6 text-white"})})]})})}),(0,a.jsx)(i.Zb,{className:"bg-gradient-to-r from-green-500 to-green-600 text-white",children:(0,a.jsx)(i.aY,{className:"p-6",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-green-100 text-sm",children:"Total Credits"}),(0,a.jsx)("p",{className:"text-2xl font-bold",children:N(y.totalCredits)})]}),(0,a.jsx)("div",{className:"p-3 bg-green-400 bg-opacity-30 rounded-lg",children:(0,a.jsx)(m.Z,{className:"h-6 w-6 text-white"})})]})})}),(0,a.jsx)(i.Zb,{className:"bg-gradient-to-r ".concat(y.isBalanced?"from-green-500 to-green-600":"from-red-500 to-red-600"," text-white"),children:(0,a.jsx)(i.aY,{className:"p-6",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-white text-sm",children:"Balance Status"}),(0,a.jsx)("p",{className:"text-2xl font-bold",children:y.isBalanced?"Balanced":"Not Balanced"})]}),(0,a.jsx)("div",{className:"p-3 bg-white bg-opacity-30 rounded-lg",children:(0,a.jsx)(f.Z,{className:"h-6 w-6 text-white"})})]})})}),(0,a.jsx)(i.Zb,{className:"bg-gradient-to-r from-purple-500 to-purple-600 text-white",children:(0,a.jsx)(i.aY,{className:"p-6",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-purple-100 text-sm",children:"Difference"}),(0,a.jsx)("p",{className:"text-2xl font-bold",children:N(y.difference)})]}),(0,a.jsx)("div",{className:"p-3 bg-purple-400 bg-opacity-30 rounded-lg",children:(0,a.jsx)(p.Z,{className:"h-6 w-6 text-white"})})]})})})]}),(0,a.jsxs)(i.Zb,{children:[(0,a.jsx)(i.Ol,{children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)(i.ll,{children:"Trial Balance Report"}),(0,a.jsxs)(i.SZ,{children:["As of ",y&&(e=y.asOfDate,new Intl.DateTimeFormat("en-US",{year:"numeric",month:"long",day:"numeric"}).format(new Date(e)))]})]}),(0,a.jsx)(d.C,{variant:(null==y?void 0:y.isBalanced)?"default":"destructive",children:(null==y?void 0:y.isBalanced)?"Balanced ✓":"Not Balanced ✗"})]})}),(0,a.jsx)(i.aY,{children:g?(0,a.jsxs)("div",{className:"text-center py-8",children:[(0,a.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto"}),(0,a.jsx)("p",{className:"text-gray-600 mt-2",children:"Loading trial balance..."})]}):(0,a.jsx)("div",{className:"overflow-x-auto",children:(0,a.jsxs)("table",{className:"w-full",children:[(0,a.jsx)("thead",{children:(0,a.jsxs)("tr",{className:"border-b bg-gray-50",children:[(0,a.jsx)("th",{className:"text-left py-3 px-4 font-medium text-gray-900",children:"Account Code"}),(0,a.jsx)("th",{className:"text-left py-3 px-4 font-medium text-gray-900",children:"Account Name"}),(0,a.jsx)("th",{className:"text-left py-3 px-4 font-medium text-gray-900",children:"Type"}),(0,a.jsx)("th",{className:"text-right py-3 px-4 font-medium text-gray-900",children:"Debit Balance"}),(0,a.jsx)("th",{className:"text-right py-3 px-4 font-medium text-gray-900",children:"Credit Balance"})]})}),(0,a.jsxs)("tbody",{children:[Object.entries(w).map(e=>{let[t,r]=e;return(0,a.jsxs)(n.Fragment,{children:[(0,a.jsx)("tr",{className:"bg-gray-50",children:(0,a.jsx)("td",{colSpan:5,className:"py-2 px-4 font-semibold text-gray-900 uppercase text-sm",children:t.charAt(0).toUpperCase()+t.slice(1)})}),r.map(e=>(0,a.jsxs)("tr",{className:"border-b hover:bg-gray-50",children:[(0,a.jsx)("td",{className:"py-3 px-4 text-gray-900",children:e.accountCode}),(0,a.jsx)("td",{className:"py-3 px-4 text-gray-900",children:e.accountName}),(0,a.jsx)("td",{className:"py-3 px-4",children:(0,a.jsx)(d.C,{variant:"outline",className:"capitalize",children:e.accountType})}),(0,a.jsx)("td",{className:"py-3 px-4 text-right text-gray-900",children:e.debitBalance>0?N(e.debitBalance):"-"}),(0,a.jsx)("td",{className:"py-3 px-4 text-right text-gray-900",children:e.creditBalance>0?N(e.creditBalance):"-"})]},e.accountCode)),(0,a.jsxs)("tr",{className:"border-b-2 border-gray-300",children:[(0,a.jsxs)("td",{colSpan:3,className:"py-2 px-4 font-semibold text-gray-900",children:["Total ",t.charAt(0).toUpperCase()+t.slice(1)]}),(0,a.jsx)("td",{className:"py-2 px-4 text-right font-semibold text-gray-900",children:N(k(t,"debitBalance"))}),(0,a.jsx)("td",{className:"py-2 px-4 text-right font-semibold text-gray-900",children:N(k(t,"creditBalance"))})]})]},t)}),(0,a.jsxs)("tr",{className:"bg-gray-100 font-bold",children:[(0,a.jsx)("td",{colSpan:3,className:"py-3 px-4 text-gray-900",children:"Grand Total"}),(0,a.jsx)("td",{className:"py-3 px-4 text-right text-gray-900",children:y&&N(y.totalDebits)}),(0,a.jsx)("td",{className:"py-3 px-4 text-right text-gray-900",children:y&&N(y.totalCredits)})]})]})]})})})]})]})})}},3277:function(e,t,r){"use strict";r.d(t,{C:function(){return l}});var a=r(7437);r(2265);var n=r(6061),s=r(2169);let c=(0,n.j)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function l(e){let{className:t,variant:r,...n}=e;return(0,a.jsx)("div",{className:(0,s.cn)(c({variant:r}),t),...n})}},575:function(e,t,r){"use strict";r.d(t,{z:function(){return d}});var a=r(7437),n=r(2265),s=r(7256),c=r(6061),l=r(2169);let i=(0,c.j)("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),d=n.forwardRef((e,t)=>{let{className:r,variant:n,size:c,asChild:d=!1,...o}=e,u=d?s.g7:"button";return(0,a.jsx)(u,{className:(0,l.cn)(i({variant:n,size:c,className:r})),ref:t,...o})});d.displayName="Button"},5671:function(e,t,r){"use strict";r.d(t,{Ol:function(){return l},SZ:function(){return d},Zb:function(){return c},aY:function(){return o},ll:function(){return i}});var a=r(7437),n=r(2265),s=r(2169);let c=n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,a.jsx)("div",{ref:t,className:(0,s.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",r),...n})});c.displayName="Card";let l=n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,a.jsx)("div",{ref:t,className:(0,s.cn)("flex flex-col space-y-1.5 p-6",r),...n})});l.displayName="CardHeader";let i=n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,a.jsx)("h3",{ref:t,className:(0,s.cn)("text-2xl font-semibold leading-none tracking-tight",r),...n})});i.displayName="CardTitle";let d=n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,a.jsx)("p",{ref:t,className:(0,s.cn)("text-sm text-muted-foreground",r),...n})});d.displayName="CardDescription";let o=n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,a.jsx)("div",{ref:t,className:(0,s.cn)("p-6 pt-0",r),...n})});o.displayName="CardContent",n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,a.jsx)("div",{ref:t,className:(0,s.cn)("flex items-center p-6 pt-0",r),...n})}).displayName="CardFooter"},2169:function(e,t,r){"use strict";r.d(t,{cn:function(){return s}});var a=r(7042),n=r(4769);function s(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,n.m6)((0,a.W)(t))}},1396:function(e,t,r){e.exports=r(5250)}},function(e){e.O(0,[621,250,971,938,744],function(){return e(e.s=5140)}),_N_E=e.O()}]);