"use strict";(()=>{var e={};e.id=2520,e.ids=[2520],e.modules={8013:e=>{e.exports=require("mongodb")},517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},8145:(e,t,n)=>{n.r(t),n.d(t,{headerHooks:()=>A,originalPathname:()=>w,patchFetch:()=>D,requestAsyncStorage:()=>l,routeModule:()=>u,serverHooks:()=>p,staticGenerationAsyncStorage:()=>m,staticGenerationBailout:()=>b});var s={};n.r(s),n.d(s,{POST:()=>r});var a=n(5419),i=n(9108),d=n(9678),c=n(8070),o=n(3567);async function r(e){try{let e=await (0,o.v)();return c.Z.json({success:e.success,message:e.message,error:e.error||null})}catch(e){return console.error("Seed API error:",e),c.Z.json({success:!1,message:"Failed to seed database",error:e},{status:500})}}let u=new a.AppRouteRouteModule({definition:{kind:i.x.APP_ROUTE,page:"/api/seed/route",pathname:"/api/seed",filename:"route",bundlePath:"app/api/seed/route"},resolvedPagePath:"/Users/pave360limited/Documents/oaj/complete-jybek-account/jybek-accounts-nextjs/src/app/api/seed/route.ts",nextConfigOutput:"",userland:s}),{requestAsyncStorage:l,staticGenerationAsyncStorage:m,serverHooks:p,headerHooks:A,staticGenerationBailout:b}=u,w="/api/seed/route";function D(){return(0,d.patchFetch)({serverHooks:p,staticGenerationAsyncStorage:m})}},777:(e,t,n)=>{n.r(t),n.d(t,{default:()=>i});var s=n(8013);if(!process.env.MONGODB_URI)throw Error('Invalid/Missing environment variable: "MONGODB_URI"');let a=process.env.MONGODB_URI,i=new s.MongoClient(a,{}).connect()},3567:(e,t,n)=>{n.d(t,{v:()=>a});var s=n(777);async function a(){let e=(await s.default).db("jybek_accounts");try{await e.collection("users").deleteMany({}),await e.collection("businesses").deleteMany({}),await e.collection("accounts").deleteMany({}),await e.collection("transactions").deleteMany({});let t={email:"admin@jybek.com",name:"Admin User",businessId:"demo-business",role:"admin",createdAt:new Date,updatedAt:new Date},n=await e.collection("users").insertOne(t);console.log("Admin user created:",n.insertedId);let s={name:"Demo Business",email:"info@demobusiness.com",phone:"+1-555-0123",address:"123 Business St, Suite 100, Business City, BC 12345",fiscalYearStart:new Date("2024-01-01"),openingBalance:5e4,createdAt:new Date,updatedAt:new Date},a=await e.collection("businesses").insertOne(s);console.log("Demo business created:",a.insertedId);let i=[{businessId:"demo-business",code:"1000",name:"Cash and Cash Equivalents",type:"asset",isActive:!0,balance:25e3,createdAt:new Date,updatedAt:new Date},{businessId:"demo-business",code:"1100",name:"Accounts Receivable",type:"asset",isActive:!0,balance:15e3,createdAt:new Date,updatedAt:new Date},{businessId:"demo-business",code:"1200",name:"Inventory",type:"asset",isActive:!0,balance:1e4,createdAt:new Date,updatedAt:new Date},{businessId:"demo-business",code:"1300",name:"Fixed Assets",type:"asset",isActive:!0,balance:5e4,createdAt:new Date,updatedAt:new Date},{businessId:"demo-business",code:"2000",name:"Accounts Payable",type:"liability",isActive:!0,balance:8e3,createdAt:new Date,updatedAt:new Date},{businessId:"demo-business",code:"2100",name:"Short-term Loans",type:"liability",isActive:!0,balance:5e3,createdAt:new Date,updatedAt:new Date},{businessId:"demo-business",code:"3000",name:"Owner's Equity",type:"equity",isActive:!0,balance:5e4,createdAt:new Date,updatedAt:new Date},{businessId:"demo-business",code:"3100",name:"Retained Earnings",type:"equity",isActive:!0,balance:12e3,createdAt:new Date,updatedAt:new Date},{businessId:"demo-business",code:"4000",name:"Sales Revenue",type:"income",isActive:!0,balance:75e3,createdAt:new Date,updatedAt:new Date},{businessId:"demo-business",code:"4100",name:"Service Revenue",type:"income",isActive:!0,balance:25e3,createdAt:new Date,updatedAt:new Date},{businessId:"demo-business",code:"5000",name:"Cost of Goods Sold",type:"expense",isActive:!0,balance:3e4,createdAt:new Date,updatedAt:new Date},{businessId:"demo-business",code:"5100",name:"Salaries and Wages",type:"expense",isActive:!0,balance:2e4,createdAt:new Date,updatedAt:new Date},{businessId:"demo-business",code:"5200",name:"Office Rent",type:"expense",isActive:!0,balance:12e3,createdAt:new Date,updatedAt:new Date},{businessId:"demo-business",code:"5300",name:"Marketing Expenses",type:"expense",isActive:!0,balance:5e3,createdAt:new Date,updatedAt:new Date}],d=await e.collection("accounts").insertMany(i);console.log("Chart of accounts created:",d.insertedIds);let c=[{businessId:"demo-business",transactionNumber:"TRX001",transactionDate:new Date("2024-01-15"),description:"Initial cash investment",reference:"INV001",type:"journal",createdAt:new Date,updatedAt:new Date},{businessId:"demo-business",transactionNumber:"TRX002",transactionDate:new Date("2024-01-20"),description:"Office rent payment",reference:"RENT001",type:"expense",createdAt:new Date,updatedAt:new Date},{businessId:"demo-business",transactionNumber:"TRX003",transactionDate:new Date("2024-01-25"),description:"Client payment - ABC Corp",reference:"PAY001",type:"income",createdAt:new Date,updatedAt:new Date}],o=await e.collection("transactions").insertMany(c);console.log("Sample transactions created:",o.insertedIds);let r=await e.collection("accounts").find({businessId:"demo-business"}).toArray(),u=r.find(e=>"1000"===e.code),l=r.find(e=>"3000"===e.code),m=r.find(e=>"5200"===e.code),p=r.find(e=>"4000"===e.code);if(!u||!l||!m||!p)throw Error("Required accounts not found for seeding transaction lines");let A=[{transactionId:o.insertedIds["0"],accountId:u._id,debitAmount:5e4,creditAmount:0,description:"Initial cash investment",createdAt:new Date},{transactionId:o.insertedIds["0"],accountId:l._id,debitAmount:0,creditAmount:5e4,description:"Initial cash investment",createdAt:new Date},{transactionId:o.insertedIds["1"],accountId:m._id,debitAmount:1e3,creditAmount:0,description:"Office rent payment",createdAt:new Date},{transactionId:o.insertedIds["1"],accountId:u._id,debitAmount:0,creditAmount:1e3,description:"Office rent payment",createdAt:new Date},{transactionId:o.insertedIds["2"],accountId:u._id,debitAmount:5e3,creditAmount:0,description:"Client payment - ABC Corp",createdAt:new Date},{transactionId:o.insertedIds["2"],accountId:p._id,debitAmount:0,creditAmount:5e3,description:"Client payment - ABC Corp",createdAt:new Date}],b=await e.collection("transaction_lines").insertMany(A);return console.log("Transaction lines created:",b.insertedIds),console.log("Database seeded successfully!"),{success:!0,message:"Database seeded with demo data"}}catch(e){return console.error("Error seeding database:",e),{success:!1,message:"Failed to seed database",error:e}}}e=n.hmd(e),n.c[n.s]===e&&a().then(e=>{console.log("Seed result:",e),process.exit(0)}).catch(e=>{console.error("Seed error:",e),process.exit(1)})}};var t=require("../../../webpack-runtime.js");t.C(e);var n=e=>t(t.s=e),s=t.X(0,[1638,6206],()=>n(8145));module.exports=s})();